<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/assets/vue/components/commons/filters-panel.vue</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../../../index.html">all files</a> / <a href="index.html">src/assets/vue/components/commons/</a> filters-panel.vue
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/35</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/33</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/1</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/33</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">&lt;template&gt;
    &lt;div class="workspace-filters-panel" v-if="items.length!=0" @click="onClickFilterPanel"&gt;
        &lt;div class="filters-panel-content line-split"&gt;
            &lt;i class="filters-icon"&gt;&lt;/i&gt;
            &lt;li v-for="(vl, dx) in items" :key="dx"&gt;{{'条件： &gt; ' + vl.text}}&lt;/li&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import size from "lodash/size";
import {paths, h_type_number, h_type_text, h_type_date} from '../../../js/constants/Constants';
export default {
    name: "FiltersPanel",
    props: ["geoFilters", "title", "filterParams"],
    data(){
<span class="cstat-no" title="statement not covered" >        return {</span>
            items: [],
            filters: [],
        }
    },
    mounted(){
<span class="cstat-no" title="statement not covered" >        this.getContent();</span>
    },
    methods: {
        onClickFilterPanel(){
            let {items, title, filterParams, filters} = <span class="cstat-no" title="statement not covered" >this;</span>
<span class="cstat-no" title="statement not covered" >            this.$f7Router.navigate(paths.filters_page, {context: {items: items, filters: filters, title: title, filterParams: filterParams}});</span>
            // this.$emit("callbacktest", {context: {items: items, filters: filters, title: title, filterParams: filterParams}})
        },
        getContent(){
            let {filters} = <span class="cstat-no" title="statement not covered" >this.geoFilters,</span> items = <span class="cstat-no" title="statement not covered" >[],</span> filterList = <span class="cstat-no" title="statement not covered" >[];</span>
<span class="cstat-no" title="statement not covered" >            filters.map((vl, dx) =&gt; <span class="fstat-no" title="function not covered" >{</span></span>
                let db = <span class="cstat-no" title="statement not covered" >vl.db;</span>
<span class="cstat-no" title="statement not covered" >                if((db === "str" || db === "bool") &amp;&amp; size(vl.list)){</span>
<span class="cstat-no" title="statement not covered" >                    items.push({</span>
                        "text": vl.list.join("，"),
                        "column_name": vl.h_value,
                        "column_type": vl.h_type,
                    });
<span class="cstat-no" title="statement not covered" >                    filterList.push(vl);</span>
                }
                else <span class="cstat-no" title="statement not covered" >if(db === "datetime" || db === "date" || db === "time" ){</span>
                    let sub;
                    let {start, end, fast_type, end_is_today} = <span class="cstat-no" title="statement not covered" >vl;</span>
<span class="cstat-no" title="statement not covered" >                    if (end_is_today) {</span>
<span class="cstat-no" title="statement not covered" >                        sub = `${start}至今`;</span>
                    }else <span class="cstat-no" title="statement not covered" >if (fast_type) {</span>
<span class="cstat-no" title="statement not covered" >                        sub = fast_type;</span>
                    }else {
<span class="cstat-no" title="statement not covered" >                        sub = start ? `${start}至${end}` : '';</span>
                    }
<span class="cstat-no" title="statement not covered" >                    if (size(sub)) {</span>
<span class="cstat-no" title="statement not covered" >                        items.push({</span>
                            "text": sub,
                            "column_name": vl.h_value,
                            "column_type": vl.h_type,
                        });
<span class="cstat-no" title="statement not covered" >                        filterList.push(vl);</span>
                    }
                }
                else <span class="cstat-no" title="statement not covered" >if(db === "int" || db === "float" || db === "bigint"){</span>
                    let text = <span class="cstat-no" title="statement not covered" >"";</span>
<span class="cstat-no" title="statement not covered" >                    if(!!vl.min &amp;&amp; !!vl.max){</span>
<span class="cstat-no" title="statement not covered" >                        text = '(' + vl.min + ',' + vl.max + ')';</span>
                    }
                    else <span class="cstat-no" title="statement not covered" >if(!!vl.min){</span>
<span class="cstat-no" title="statement not covered" >                        text = v.min + '以上';</span>
                    }
                    else <span class="cstat-no" title="statement not covered" >if(!!vl.max){</span>
<span class="cstat-no" title="statement not covered" >                        text = vl.max + '以下';</span>
                    }
<span class="cstat-no" title="statement not covered" >                    if(size(text)){</span>
<span class="cstat-no" title="statement not covered" >                        items.push({</span>
                            "text": text,
                            "column_name": vl.h_value,
                            "column_type": vl.h_type,
                        });
<span class="cstat-no" title="statement not covered" >                        filterList.push(vl);</span>
                    }
                }
                else {}
            });
<span class="cstat-no" title="statement not covered" >            this.items = items;</span>
<span class="cstat-no" title="statement not covered" >            this.filters = filterList;</span>
        }
    }
}
&lt;/script&gt;
&lt;style lang="scss" scoped&gt;
.workspace-filters-panel {
    width: 100%;
    height: 36px;
    box-sizing: border-box;
    padding-left: 16px;
    overflow-x: hidden;
    .filters-panel-content {
        display: inline-flex;
        justify-content: flex-start;
        line-height: 36px;
        min-width: 9999px;
        font-family: PingFang SC;
        position: relative;
        .filters-icon {
            width: 16px;
            height: 16px;
            display: block;
            margin: 10px 32px 10px 0;
            background: url("../../../../static/images/icon_filter.svg") no-repeat;
            background-size: 100% 100%;
        }
        li {
            display: block;
            list-style-type: none;
            font-size: 14px;
            color: #9699a0;
            font-weight: 400;
            margin-right: 16px;
            height: 36px;
            overflow: hidden;
        }
    }
}
&lt;/style&gt;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Aug 09 2018 15:45:34 GMT+0800 (CST)
</div>
</div>
<script src="../../../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../../../sorter.js"></script>
</body>
</html>
